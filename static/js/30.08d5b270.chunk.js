"use strict";(self.webpackChunkfirst_react_project=self.webpackChunkfirst_react_project||[]).push([[30],{8892:function(t,e,s){s.r(e),s.d(e,{default:function(){return et}});var r=s(8633),n=s(9101),i="ProfileError_errorContainer__x0j5z",o="ProfileError_errorText__ICnj0",a="ProfileError_errorImgContainer__kBJSZ",l="ProfileError_closeButton__FgA1J",c=s.p+"static/media/error.38e891b941d90b3507f9.JPG",u=s(184),d=function(t){var e=t.error,s=t.setError,r=t.content;return e.isError?(0,u.jsxs)("div",{className:i,onClick:function(t){t.currentTarget.className===t.target.className&&s(!1,"")},children:[(0,u.jsxs)("p",{className:o,children:["\u041e\u0448\u0438\u043a\u0430: ",(0,u.jsxs)("span",{children:["$",e.message]})," !"]}),(0,u.jsx)("div",{className:a,children:(0,u.jsx)("img",{src:c,alt:"error"})}),(0,u.jsx)("button",{className:l,onClick:function(){s(!1,"")},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}):r},h=s(5671),p=s(3144),f=s(136),x=s(7277),m=s(2791),j=s(4883),v=s(9439),b="ProfileInfo_descriptionBlock__2tGXb",g="ProfileInfo_userPhoto__GthK4",k=s(4353),_=function(t){(0,f.Z)(s,t);var e=(0,x.Z)(s);function s(){var t;(0,h.Z)(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).state={editMode:!1,status:t.props.status},t.onActivateEditMode=function(){t.props.isOwner&&t.setState({editMode:!0})},t.onDeactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return(0,p.Z)(s,[{key:"componentDidUpdate",value:function(t,e,s){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,u.jsx)("div",{children:this.state.editMode?(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Status"})," ",(0,u.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.onDeactivateEditMode,value:this.state.status})]}):(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Status"})," ",(0,u.jsx)("span",{className:"class",onDoubleClick:this.onActivateEditMode,children:this.props.status||"no status"})]})})}}]),s}(m.Component),P="ProfileData_contact__Z2pjn",S=function(t){var e=t.contactTitle,s=t.contactValue;return(0,u.jsxs)("div",{className:P,children:[(0,u.jsx)("b",{children:e}),": ",s]})},y=function(t){var e=t.profile,s=t.isOwner,r=t.onChangeEditMode;return(0,u.jsxs)("div",{children:[s&&(0,u.jsx)("div",{children:(0,u.jsx)("button",{onClick:r,children:"Edit"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Full name"}),": ",e.fullName]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Contacts"}),":",Object.entries(e.contacts).map((function(t,e){return(0,u.jsx)(S,{contactTitle:t[0],contactValue:t[1]},e)}))]})]})},C=s(5705),M=s(2926),A="ProfileDataForm_formSummaryError__BgotB",F="ProfileDataForm_contact__aWyUB",N="FormServerError_formSummaryError__Mk0UA",E=function(t){var e=t.status,s=t.name;if(e&&e[s])return(0,u.jsx)("div",{className:N,children:e[s]})},J=function(t){var e=t.contactTitle,s=t.contactName,r=t.handleChange,n=t.status;return(0,u.jsxs)("div",{className:F,children:[(0,u.jsx)("b",{children:e}),":",(0,u.jsx)(M.W,{name:s,type:"text",placeholder:e,callback:r}),n&&n.contacts&&n.contacts[e]&&(0,u.jsx)("div",{className:A,children:n.contacts[e]})]})},Z=function(t){var e=t.profile,s=t.isSubmitting,r=t.status,n=t.handleChange,i=t.setFieldValue,o=(0,m.useState)(e.lookingForAJob||!1),a=(0,v.Z)(o,2),l=a[0],c=a[1];return(0,u.jsxs)(C.l0,{children:[(0,u.jsx)("button",{type:"submit",disabled:s,children:"Save"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Full name"}),":",(0,u.jsx)(M.W,{name:"fullName",type:"text",placeholder:"Full name",callback:n}),(0,u.jsx)(E,{status:r,name:"fullName"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Looking for a job"}),":",(0,u.jsx)(M.W,{name:"lookingForAJob",type:"checkbox",props:{id:"rememberMe"},text:"looking for a job",callback:function(t){i("lookingForAJob",t.target.checked),c(t.target.checked)}}),(0,u.jsx)(E,{status:r,name:"lookingForAJob"})]}),l&&(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"My professional skills"}),":",(0,u.jsx)(M.W,{name:"lookingForAJobDescription",type:"textarea",placeholder:"My professional skills",callback:n}),(0,u.jsx)(E,{status:r,name:"lookingForAJobDescription"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"About me"}),":",(0,u.jsx)(M.W,{name:"aboutMe",type:"textarea",placeholder:"About me",callback:n}),(0,u.jsx)(E,{status:r,name:"aboutMe"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("b",{children:"Contacts"}),":",Object.keys(e.contacts).map((function(t,e){return(0,u.jsx)(J,{contactTitle:t,contactName:"contacts.".concat(t),handleChange:n,status:r},e)}))]})]})},D=function(t){var e=t.profile,s=t.saveProfile,r=t.setEditMode,n={lookingForAJob:e.lookingForAJob||!1,lookingForAJobDescription:e.lookingForAJobDescription||"",fullName:e.fullName||"",aboutMe:e.aboutMe||"",contacts:{github:e.github||"",vk:e.vk||"",facebook:e.facebook||"",instagram:e.instagram||"",twitter:e.twitter||"",website:e.website||"",youtube:e.youtube||"",mainLink:e.mainLink||""}};return(0,u.jsx)(C.J9,{initialValues:n,onSubmit:function(t,e){var i=e.setStatus,o=e.setSubmitting;s(t,i,o,n,r)},children:function(t){var s=t.isSubmitting,r=t.status,n=t.handleChange,i=t.setFieldValue;return(0,u.jsx)(Z,{profile:e,isSubmitting:s,status:r,handleChange:n,setFieldValue:i})}})},w=function(t){var e=t.profile,s=t.status,r=t.updateStatus,n=t.isOwner,i=t.savePhoto,o=t.saveProfile,a=(0,m.useState)(!1),l=(0,v.Z)(a,2),c=l[0],d=l[1];return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:b,children:[(0,u.jsx)("img",{className:g,src:e.photos.large||k,alt:"avatar"}),n&&(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&i(t.target.files[0])}})}),c?(0,u.jsx)(D,{profile:e,saveProfile:o,setEditMode:d}):(0,u.jsx)(y,{profile:e,isOwner:n,onChangeEditMode:function(){d(!0)}}),(0,u.jsx)(_,{status:s,updateStatus:r,isOwner:n}),(0,u.jsx)(T,{})]})})},T=m.memo((function(){return console.log("render"),(0,u.jsx)("div",{children:"TEST"})})),O=s(1413),B=s(7689),I=s(7781),L=function(t){(0,f.Z)(s,t);var e=(0,x.Z)(s);function s(){return(0,h.Z)(this,s),e.apply(this,arguments)}return(0,p.Z)(s,[{key:"refreshProfile",value:function(){var t=this.props.router.params.id;t||(t=this.props.authorizedUserId)||this.props.router.navigate("/login"),t&&(this.props.getProfile(t),this.props.getStatus(t))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){t.router.params.id!==this.props.router.params.id&&this.refreshProfile()}},{key:"render",value:function(){return(0,u.jsx)(u.Fragment,{children:this.props.profile?(0,u.jsx)(w,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.router.params.id,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}):(0,u.jsx)(j.p,{})})}}]),s}(m.Component),V={getProfile:r.Ai,getStatus:r.lR,updateStatus:r.Nf,savePhoto:r.Ju,saveProfile:r.Ii},U=(0,I.qC)((0,n.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth}}),V),(function(t){return function(e){var s=(0,B.TH)(),r=(0,B.s0)(),n=(0,B.UO)();return(0,u.jsx)(t,(0,O.Z)((0,O.Z)({},e),{},{router:{location:s,navigate:r,params:n}}))}}))(L),W="MyPosts_postsBlock__TbVLd",q="MyPosts_posts__o+uBJ",z="Post_item__m2mev",G=function(t){var e=t.message,s=t.numberOfLike;return(0,u.jsxs)("div",{className:z,children:[(0,u.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=7808f22d2c74cc72b53378dc5b5479650088c558-7663734-images-thumbs&n=13",alt:"avatar"}),e,(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{children:"like"})," ",s]})]})},R=s(6727),$="MyPostForm_error__Y+Nb3",H=function(t){var e=t.isSubmitting,s=t.handleChange;return(0,u.jsxs)(C.l0,{children:[(0,u.jsx)(M.W,{name:"text",type:"textarea",placeholder:"Text",callback:s}),(0,u.jsx)(C.Bc,{name:"text",component:"div",className:$}),(0,u.jsx)("button",{type:"submit",disabled:e,children:"Add post"})]})},K=R.Ry().shape({text:R.Z_().max(50,"Must be shorter than 50 characters").required("Required")}),X=function(t){var e=t.addPost;return(0,u.jsx)(C.J9,{initialValues:{text:""},validationSchema:K,onSubmit:function(t,s){var r=s.setSubmitting,n=s.resetForm;r(!1),e(t.text),n()},children:function(t){var e=t.isSubmitting,s=t.handleChange;return(0,u.jsx)(H,{isSubmitting:e,handleChange:s})}})},Y=(r.q2,function(){var t=function(){var t=(0,n.v9)((function(t){return t.profilePage.posts})),e=(0,n.I0)();return{posts:t,onAddPost:(0,m.useCallback)((function(t){return e((0,r.q2)(t))}),[e])}}(),e=t.posts,s=t.onAddPost,i=e.map((function(t,e){return(0,u.jsx)(G,{message:t.message,numberOfLike:t.numberOfLike},e)}));return(0,u.jsxs)("div",{className:W,children:[(0,u.jsx)("h3",{children:"My posts"}),(0,u.jsx)(X,{addPost:s}),(0,u.jsx)("div",{className:q,children:i})]})}),Q=function(){return(0,u.jsxs)("div",{children:[(0,u.jsx)(U,{}),(0,u.jsx)(Y,{})]})},tt={setError:r.sT},et=(0,n.$j)((function(t){return{error:t.profilePage.error}}),tt)((function(t){var e=t.error,s=t.setError;return e.isError?(0,u.jsx)("div",{children:(0,u.jsx)(d,{error:e,setError:s,content:(0,u.jsx)(Q,{})})}):(0,u.jsx)(Q,{})}))}}]);
//# sourceMappingURL=30.08d5b270.chunk.js.map